# Проект: Image Generation

## Описание
Проект предназначен для генерации изображений с использованием моделей машинного обучения. Веб-интерфейс основан на Django и предоставляет возможность взаимодействовать с генеративной моделью через веб-браузер.

## Структура проекта

### image_generation
Основная директория проекта с веб-интерфейсом. Включает следующие важные поддиректории и файлы:
- `weights`: Директория для скачивания весов моделей. Скачайте веса [здесь](https://disk.yandex.ru/d/dGy3tpUD90ccCg) и разместите их в этой директории.
  - `lora`: Веса после дообучения модели.
  - `models--stabilityai--stable-diffusion-xl-base-1`: Веса оригинальной модели Stable Diffusion XL Base для работы приложения в автономном режиме.
- `logs`: Директория для хранения всех результатов генерации с дополнительной мета-информацией, включая сгенерированные изображения.
- `app/image_generator.py`: Основная логика генерации изображений.
- `app/prompts.yml`: Основные промпты для генерации изображений по продукту.

### train_scripts
Скрипты для обучения модели Stable Diffusion от Diffusers.

### DEMO.ipynb
Ноутбук с демонстрационным запуском генеративной модели. Перед запуском скачайте веса и поместите их в нужную директорию.

### RND.ipynb
Ноутбук для экспериментов и бенчмарков моделей.

## Как запустить проект

1. **Склонировать проект к себе на локальную машину:**
    ```bash
    git clone <URL_проекта>
    ```
2. **Скачать веса из [Yandex Disk](https://disk.yandex.ru/d/dGy3tpUD90ccCg) и распаковать их в директорию `image_generation/weights`.**
3. **Запуск генерации из Python Notebook:**
    - Откройте и выполните ноутбук `DEMO.ipynb`.
4. **Запуск веб-проекта:**
    - Перейдите в директорию `image_generation/`:
      ```bash
      cd image_generation/
      ```
    - Запустите сервер:
      ```bash
      python manage.py runserver 127.0.0.1:8001
      ```
    - Откройте в браузере [http://127.0.0.1:8001/](http://127.0.0.1:8001/).
5. **Использование онлайн сервиса:**
    - Сервис доступен по адресу [http://77.223.101.161:8001/](http://77.223.101.161:8001/).

## Как использовать веб-сервис

1. **Перейдите по адресу, где развернут сервис.**
2. **Войдите или зарегистрируйтесь.**
3. **Введите или выберите название продукта в поле "Product Name" и нажмите "Get Prompts".**
4. **Отредактируйте текстовые описания в полях "Prompt" и "Negative Prompt" по своему усмотрению.**
5. **Настройте дополнительные параметры (Height, Width, Seed) через кнопку "Params".**
6. **Нажмите кнопку "Generate" и дождитесь появления изображения.**
7. **Оцените изображение с помощью кнопок лайк или дизлайк.**

## Техническая информация

1. **Все логи с результатами генераций хранятся в `image_generation/logs`.**
2. **Предустановленные пользователи:**
    - Суперюзер: `admin`, пароль: `admin`
    - Тестовый пользователь: `test_user`, пароль: `123456`
3. **Админская панель доступна по адресу: `ip_address/admin/`.**
4. **Проект реализован на Django с использованием стандартных директорий и именования. При необходимости, поменять адреса в settings.py в корневом проекте django**
5. **Для аппаратной настройки инференса следует корректировать файл image_generation/app/views.py с соотетствующими параметрами DEVICE или логику модели в image_generation/app/services/image_generator.py**

